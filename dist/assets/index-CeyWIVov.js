import{r as k,o as O,n as P,c as C,a as i,t as M,w as D,v as L,b as U,d as z,e as A,F as B,f as $,g as E,h as S,i as N,j as F}from"./vendor-fKXsXaas.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&d(r)}).observe(document,{childList:!0,subtree:!0});function f(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(a){if(a.ep)return;a.ep=!0;const n=f(a);fetch(a.href,n)}})();function R(){function v(a,n){const r=a.canvas;a.clearRect(0,0,r.width,r.height);const h=Math.min(r.width/n.width,r.height/n.height),t=(r.width-n.width*h)/2,y=(r.height-n.height*h)/2;a.drawImage(n,t,y,n.width*h,n.height*h)}function c(a,n){const r=a.canvas,h=a.getImageData(0,0,r.width,r.height),t=h.data;switch(n){case"grayscale":for(let e=0;e<t.length;e+=4){const o=t[e]*.299+t[e+1]*.587+t[e+2]*.114;t[e]=o,t[e+1]=o,t[e+2]=o}break;case"sepia":for(let e=0;e<t.length;e+=4){const o=t[e],p=t[e+1],m=t[e+2];t[e]=Math.min(255,o*.393+p*.769+m*.189),t[e+1]=Math.min(255,o*.349+p*.686+m*.168),t[e+2]=Math.min(255,o*.272+p*.534+m*.131)}break;case"invert":for(let e=0;e<t.length;e+=4)t[e]=255-t[e],t[e+1]=255-t[e+1],t[e+2]=255-t[e+2];break;case"brightness":for(let e=0;e<t.length;e+=4)t[e]=Math.min(255,t[e]+50),t[e+1]=Math.min(255,t[e+1]+50),t[e+2]=Math.min(255,t[e+2]+50);break;case"contrast":const y=1.5;for(let e=0;e<t.length;e+=4)t[e]=Math.min(255,Math.max(0,y*(t[e]-128)+128)),t[e+1]=Math.min(255,Math.max(0,y*(t[e+1]-128)+128)),t[e+2]=Math.min(255,Math.max(0,y*(t[e+2]-128)+128));break;case"saturate":for(let e=0;e<t.length;e+=4){const o=t[e]*.299+t[e+1]*.587+t[e+2]*.114;t[e]=Math.min(255,o+1.5*(t[e]-o)),t[e+1]=Math.min(255,o+1.5*(t[e+1]-o)),t[e+2]=Math.min(255,o+1.5*(t[e+2]-o))}break;case"blur":f(t,r.width,r.height);break}n!=="original"&&a.putImageData(h,0,0)}function f(a,n,r){const t=[];for(let o=0;o<5;o++){t[o]=[];for(let p=0;p<5;p++)t[o][p]=1/(5*5)}const e=new Uint8ClampedArray(a.length);for(let o=0;o<r;o++)for(let p=0;p<n;p++){let m=0,_=0,w=0,I=0;for(let s=-2;s<=2;s++)for(let u=-2;u<=2;u++){const g=Math.min(n-1,Math.max(0,p+u)),x=(Math.min(r-1,Math.max(0,o+s))*n+g)*4,T=t[s+2][u+2];m+=a[x]*T,_+=a[x+1]*T,w+=a[x+2]*T,I+=a[x+3]*T}const l=(o*n+p)*4;e[l]=m,e[l+1]=_,e[l+2]=w,e[l+3]=I}a.set(e)}function d(a,n){if(!n.trim())return;const r=a.canvas;a.font="bold 40px Arial, sans-serif",a.textAlign="center",a.textBaseline="middle",a.strokeStyle="black",a.lineWidth=4,a.fillStyle="white";const h=r.width/2,t=r.height-60;a.strokeText(n,h,t),a.fillText(n,h,t)}return{loadImageToCanvas:v,applyStyle:c,drawText:d}}const V=(v,c)=>{const f=v.__vccOpts||v;for(const[d,a]of c)f[d]=a;return f},H={id:"app"},j={class:"container"},W={class:"header"},q={class:"title"},G={class:"language-selector"},K={class:"main"},Y={class:"upload-section"},J={key:0,class:"upload-hint"},Q=["src"],X={class:"controls"},Z={class:"control-group"},ee=["value"],te={class:"control-group"},ae=["placeholder"],ne={class:"canvas-section"},se={class:"actions"},le=["disabled"],oe={__name:"App",setup(v){const c=k(null),f=k(null),d=k(null),a=k("original"),n=k(""),{loadImageToCanvas:r,applyStyleFilter:h,drawTextOnCanvas:t,downloadCanvas:y}=R();function e(){f.value&&f.value.click()}function o(l){var g;const s=(g=l.target.files)==null?void 0:g[0];if(!s)return;const u=new FileReader;u.onload=b=>{d.value=b.target.result,m(b.target.result)},u.readAsDataURL(s)}function p(l){var u;const s=(u=l.dataTransfer.files)==null?void 0:u[0];if(s&&s.type.startsWith("image/")){const g=new FileReader;g.onload=b=>{d.value=b.target.result,m(b.target.result)},g.readAsDataURL(s)}}function m(l){const s=new Image;s.onload=()=>{c.value&&(r(c.value,s),_(),w())},s.src=l}function _(){!d.value||!c.value||(h(c.value,a.value),w())}function w(){!d.value||!c.value||t(c.value,n.value)}function I(){!d.value||!c.value||y(c.value,"meme.png")}return O(async()=>{if(await P(),c.value){const l=c.value.getContext("2d");l.fillStyle="#f0f0f0",l.fillRect(0,0,400,400),l.fillStyle="#666",l.font="16px Arial",l.textAlign="center",l.fillText("请上传图片",200,200)}}),(l,s)=>(S(),C("div",H,[i("div",j,[i("header",W,[i("h1",q,M(l.$t("title")),1),i("div",G,[D(i("select",{"onUpdate:modelValue":s[0]||(s[0]=u=>l.$i18n.locale=u),class:"language-select"},s[4]||(s[4]=[i("option",{value:"zh-CN"},"中文",-1),i("option",{value:"en-US"},"English",-1)]),512),[[L,l.$i18n.locale]])])]),i("main",K,[i("div",Y,[i("div",{class:z(["upload-area",{"has-image":d.value}]),onClick:e,onDragover:s[1]||(s[1]=U(()=>{},["prevent"])),onDrop:U(p,["prevent"])},[i("input",{ref_key:"fileInput",ref:f,type:"file",accept:"image/*",onChange:o,class:"file-input"},null,544),d.value?A("",!0):(S(),C("div",J,[s[5]||(s[5]=i("div",{class:"upload-icon"},"📷",-1)),i("p",null,M(l.$t("uploadHint")),1)])),d.value?(S(),C("img",{key:1,src:d.value,alt:"uploaded",class:"uploaded-image"},null,8,Q)):A("",!0)],34)]),i("div",X,[i("div",Z,[i("label",null,M(l.$t("style")),1),D(i("select",{"onUpdate:modelValue":s[2]||(s[2]=u=>a.value=u),onChange:_,class:"style-select"},[(S(!0),C(B,null,$(l.$t("styles"),(u,g)=>(S(),C("option",{key:g,value:g},M(u),9,ee))),128))],544),[[L,a.value]])]),i("div",te,[i("label",null,M(l.$t("text")),1),D(i("input",{"onUpdate:modelValue":s[3]||(s[3]=u=>n.value=u),placeholder:l.$t("textPlaceholder"),maxlength:"10",onInput:w,class:"text-input"},null,40,ae),[[E,n.value]])])]),i("div",ne,[i("canvas",{ref_key:"canvas",ref:c,width:"400",height:"400",class:"preview-canvas"},null,512)]),i("div",se,[i("button",{onClick:I,disabled:!d.value,class:"download-btn"},M(l.$t("download")),9,le)])])])]))}},ie=V(oe,[["__scopeId","data-v-e26a94b2"]]),re={"zh-CN":{title:"制作你的专属表情包",upload:"上传图片",uploadHint:"点击或拖拽图片到此区域",style:"选择风格",text:"输入文字（最多10字）",textPlaceholder:"输入表情包文字...",download:"下载表情包",preview:"预览",language:"语言",styles:{original:"原图",grayscale:"黑白",sepia:"怀旧",blur:"模糊",brightness:"高亮",contrast:"对比",saturate:"饱和",invert:"反色"}},"en-US":{title:"Create Your Own Meme",upload:"Upload Image",uploadHint:"Click or drag image to this area",style:"Choose Style",text:"Enter Text (max 10 chars)",textPlaceholder:"Enter meme text...",download:"Download Meme",preview:"Preview",language:"Language",styles:{original:"Original",grayscale:"Grayscale",sepia:"Sepia",blur:"Blur",brightness:"Brightness",contrast:"Contrast",saturate:"Saturate",invert:"Invert"}}},ce=N({legacy:!1,locale:"zh-CN",fallbackLocale:"en-US",messages:re});document.addEventListener("DOMContentLoaded",()=>{const v=F(ie);v.use(ce),document.getElementById("app")?v.mount("#app"):console.error("Mount point #app not found")});
